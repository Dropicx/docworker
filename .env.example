# ==========================================
# DocTranslator Configuration
# ==========================================
# Copy this file to .env and fill in your values
# DO NOT commit .env file to version control!

# ==========================================
# Application Settings
# ==========================================
APP_NAME=DocTranslator
ENVIRONMENT=development  # development, staging, or production
DEBUG=false
PORT=9122

# ==========================================
# Database Configuration (Required)
# ==========================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
# Railway automatically provides this
DATABASE_URL=postgresql://user:password@localhost:5432/doctranslator

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30

# ==========================================
# Redis Configuration (Optional)
# ==========================================
# Redis URL for Celery task queue
# Leave empty if not using Celery
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# ==========================================
# OVH AI Endpoints (Required)
# ==========================================
# Get your token from: https://endpoints.ai.cloud.ovh.net
OVH_AI_ENDPOINTS_ACCESS_TOKEN=your-ovh-token-here
OVH_AI_BASE_URL=https://oai.endpoints.kepler.ai.cloud.ovh.net/v1

# Model Configuration
OVH_MAIN_MODEL=Meta-Llama-3_3-70B-Instruct
OVH_PREPROCESSING_MODEL=Mistral-Nemo-Instruct-2407
OVH_TRANSLATION_MODEL=Meta-Llama-3_3-70B-Instruct
OVH_VISION_MODEL=Qwen2.5-VL-72B-Instruct
OVH_VISION_BASE_URL=https://qwen-2-5-vl-72b-instruct.endpoints.kepler.ai.cloud.ovh.net

# Use only OVH (disable fallbacks)
USE_OVH_ONLY=true

# ==========================================
# Security Settings
# ==========================================
# Secret key for session encryption (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here

# Access code for settings UI (backward compatible with SETTINGS_ACCESS_CODE)
SETTINGS_ACCESS_CODE=admin123

# CORS allowed origins (comma-separated)
# Use "*" for all origins in development, specify domains in production
ALLOWED_ORIGINS=*

# Trusted host headers
TRUSTED_HOSTS=*

# ==========================================
# File Processing
# ==========================================
# Maximum upload file size in megabytes
MAX_FILE_SIZE_MB=50

# Allowed file extensions (comma-separated)
ALLOWED_FILE_TYPES=.pdf,.docx,.txt,.jpg,.jpeg,.png

# Temporary file storage directory
TEMP_DIR=/tmp

# ==========================================
# External Services (Hetzner)
# ==========================================
# External PaddleOCR service (deployed via external_deployment/hetzner_paddleocr)
EXTERNAL_OCR_URL=https://ocr.yourdomain.com
EXTERNAL_API_KEY=your-paddleocr-api-key

# PRIMARY: Hetzner SpaCy PII service (deployed via external_deployment/hetzner_pii)
EXTERNAL_PII_URL=https://pii.yourdomain.com
EXTERNAL_PII_API_KEY=your-pii-api-key
USE_EXTERNAL_PII=true  # Enable external PII service

# FALLBACK: Railway SpaCy PII service (backup - keep at 0 replicas)
# Deploy pii_service/ to Railway as separate service
FALLBACK_PII_URL=https://pii-fallback.railway.app
FALLBACK_PII_API_KEY=your-fallback-pii-api-key

# ==========================================
# Feature Flags
# ==========================================
# Enable/disable features without code changes
ENABLE_OCR=true
ENABLE_PRIVACY_FILTER=true
ENABLE_MULTI_FILE=true

# ==========================================
# AI Processing Settings
# ==========================================
# Timeout for AI requests in seconds
AI_TIMEOUT_SECONDS=300

# Maximum retry attempts for failed AI requests
AI_MAX_RETRIES=3

# Delay between AI requests in milliseconds (rate limiting)
AI_REQUEST_DELAY_MS=100

# ==========================================
# Logging Configuration
# ==========================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format (Python logging format)
LOG_FORMAT=%(asctime)s | %(levelname)-8s | %(name)s | %(message)s

# ==========================================
# Railway Settings (Auto-configured)
# ==========================================
# These are automatically set by Railway, no need to configure manually
# RAILWAY_ENVIRONMENT=production
# RAILWAY_PROJECT_ID=your-project-id

# ==========================================
# Rate Limiting
# ==========================================
# Maximum API requests per minute per IP
RATE_LIMIT_PER_MINUTE=60

# ==========================================
# Development Settings
# ==========================================
# For local development, you may want to override:
# ENVIRONMENT=development
# DEBUG=true
# LOG_LEVEL=DEBUG
# ALLOWED_ORIGINS=http://localhost:3000,http://localhost:9121

# ==========================================
# Production Settings
# ==========================================
# For production deployment on Railway:
# ENVIRONMENT=production
# DEBUG=false
# LOG_LEVEL=INFO
# Specify exact ALLOWED_ORIGINS (no wildcards)
