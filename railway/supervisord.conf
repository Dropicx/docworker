[supervisord]
nodaemon=true
logfile=/app/logs/supervisord.log
pidfile=/tmp/supervisord.pid

[program:backend]
command=uvicorn app.main:app --host 127.0.0.1 --port 9122 --workers 1
directory=/app/backend
autostart=true
autorestart=true
startsecs=10
startretries=5
stdout_logfile=/app/logs/backend.log
stderr_logfile=/app/logs/backend-error.log
environment=PYTHONPATH="/app/backend",ENVIRONMENT="production",USE_OVH_ONLY="true"

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
startsecs=5
priority=999
stdout_logfile=/app/logs/nginx.log
stderr_logfile=/app/logs/nginx-error.log

[group:doctranslator]
programs=backend,nginx